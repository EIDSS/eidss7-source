@inherits AmendTestResultBase
@using EIDSS.Web.Components.CrossCutting
@using EIDSS.Domain.ViewModels.Laboratory

<RadzenTemplateForm Data="Test" @ref="Form" Submit="OnSubmit" TItem="TestingGetListViewModel">
    <div class="card">
        <div class="form-row">
            <div class="col-12">
                <InterfaceEditorResource CssClass="col-12" For="currentTestResultName" InterfaceEditorKey="@FieldLabelResourceKeyConstants.AmendTestResultModalCurrentTestResultFieldLabel" IsRow="true">
                    <RadzenTextBox @bind-Value="Test.TestResultTypeName" class="form-control" Disabled="true" Name="currentTestResultName"/>
                </InterfaceEditorResource>
            </div>
        </div>
        <div class="form-row">
            <div class="col-12">
                <InterfaceEditorResource CssClass="col-12" For="testResultTypeID" InterfaceEditorKey="@FieldLabelResourceKeyConstants.AmendTestResultModalChangedTestResultFieldLabel" IsRow="true">
                    <RadzenDropDown AllowClear="true" @bind-Value="Test.TestResultTypeID" class="form-control" Data="LaboratoryService.TestResultTypes.Where(x => Test.TestNameTypeID != null && x.idfsTestName == Test.TestNameTypeID).AsODataEnumerable()" LoadData="args => GetTestResultTypesByTestName(args, Test.TestNameTypeID)" Name="testResultTypeID" TextProperty="strTestResultName" TValue="long?" ValueProperty="idfsTestResult"/>
                </InterfaceEditorResource>
            </div>
        </div>
        <div class="form-row">
            <div class="col-12">
                <InterfaceEditorResource CssClass="col-12" For="reasonForAmendment" InterfaceEditorKey="@FieldLabelResourceKeyConstants.AmendTestResultModalReasonforAmendmentFieldLabel" IsRow="true">
                    <RadzenTextArea @bind-Value="ReasonForAmendment" class="form-control" Name="reasonForAmendment" Rows="5"/>
                </InterfaceEditorResource>
            </div>
        </div>
        <div class="card-footer">
            <div class="form-row">
                <div class="col-12">
                    <button class="btn btn-outline-primary" @onclick="OnCancelClick" type="button">@Localizer.GetString(ButtonResourceKeyConstants.CancelButton)</button>
                    <button class="btn btn-primary" type="submit">@Localizer.GetString(ButtonResourceKeyConstants.AmendTestResultModalAmendButtonText)</button>
                </div>
            </div>
        </div>
    </div>
</RadzenTemplateForm>